<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="viewport"
      charset="UTF-8"
      content="width=device-width, initial-scale=1, user-scalable=yes"
    />
    <title>Shelly Setup</title>
    <link rel="stylesheet" href="/css/base.css" />
  </head>
  <body style="padding-top: 58px">
    <div id="header"></div>
    <div id="loader" class="loader"></div>
    <div id="base-panel" class="base-panel" hidden>
      <form action="/pvz/shelly/config/save" method="post">
        <div class="noorder">
          <div>
            <label id="lbl_check_interval" for="check_interval"
              >Prüfintervall</label
            >
            <input
              type="range"
              min="1"
              max="60"
              value="1"
              class="slider number"
              id="check_interval"
              name="check_interval"
              oninput="this.nextElementSibling.value = this.value"
            />
            <output id="check_interval_output">1</output>
            <label id="info_check_interval"
              >Sekunden zwischen zwei Prüfungen. Standard: 10 Sekunden.</label
            >
          </div>
          <div>
            <label id="lbl_shelly3emAddr" for="shelly3emAddr"
              >Shelly Em3 Address</label
            >
            <input
              id="shelly3emAddr"
              type="text"
              name="shelly3emAddr"
              placeholder="192.168.1.131"
            />
            <label id="info_shelly3emAddr">/status wird angehängt.</label>
          </div>
        </div>
        <input id="npt_apply" type="submit" name="apply" value="Apply" />
      </form>
      <br />
    </div>

    <script>
      var jsons = [["/pvz/shelly/config.json", "fillShellyConfig"]];
    </script>
    <script src="/js/postload.js"></script>
    <script type="text/javascript">
      function fillShellyConfig(data, url) {
        ["check_interval", "shelly3emAddr"].forEach(function (id, idy, arr) {
          document.getElementById(id).value = data["shelly"][id];
        });
        document.getElementById("check_interval_output").value =
          data["shelly"]["check_interval"];
        document.getElementById("loader").hidden = true;
        document.getElementById("base-panel").hidden = false;
      }
    </script>
  </body>
</html>
