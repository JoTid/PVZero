<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="viewport"
      charset="utf-8"
      content="width=device-width, initial-scale=1, user-scalable=yes"
    />
    <title>PVZero</title>
    <link rel="stylesheet" href="/css/base.css" />
  </head>

  <body style="padding-top: 58px">
    <div id="header"></div>
    <div class="base-panel">
      <br />
      <span id="pvzero_title" style="font-weight: bold; font-size: 2em"
        >PVZero</span
      >
      <span id="version">Unknown</span>

      <div id="shelly_3em" class="noorder">
        <form>
          <div>
            <input id="autoupdate" type="checkbox" name="autoupdate" value="true" checked onclick='handleClickAutoUpdate(this);'>
              <label id="lbl_autoupdate">jede Sekunde aktualisieren</label>
            </input>
          </div>
        </form>
  
        <div class="line_named">Shelly 3em</div>
        <div id="consumption_power">warte auf die Daten vom Shelly 3em...</div>
        <div id="check_interval"></div>
        <div class="line_named">Leistungssteuerung</div>
        <div id="feed_in_power"></div>
        <div id="psu_vcc"></div>
        <div class="line_named">Speicher</div>
        <div>
          <div id="battery_state" style="padding-bottom:0px"></div>
          <label id="info_battery_state"></label>
        </div>
        <div id="charge_voltage"></div>
        <div id="charge_current"></div>
        <br />
        <label id="info_check_info"></label>
      </div>
      <br />
    </div>
    <script src="/js/postload.js"></script>
    <script src="/js/shelly_3em_connector.js"></script>
    <script type="text/javascript">
      function handleClickAutoUpdate(cb) {
        if (cb.checked) {
          console.log(`enable auto update`);
          timerRefresh = setTimeout(getJSON.bind(null, "/pvzero/state.json", "fillPVZeroState"), 1000);
        } else {
          console.log(`disable auto update`);
          clearTimeout(timerRefresh);
        }
      }
    </script>
  </body>
</html>
